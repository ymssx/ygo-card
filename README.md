# card.js

<img src="https://img.shields.io/npm/v/ygo-card"/>
<img src="https://img.shields.io/npm/l/ygo-card"/>
<img src="https://img.shields.io/badge/yami-%40qq.com-lightgrey"/>

è¿™æ˜¯ä¸€ä¸ªæ¸¸æˆç‹å¡ç‰‡æ¸²æŸ“å·¥å…·ï¼Œä½ åªéœ€è¦åœ¨ä½ çš„ç½‘ç«™å¼•å…¥card.jsï¼Œå°±å¯ä»¥è½»æ¾åœ°æ¸²æŸ“å‡ºæ ‡å‡†çš„æ¸¸æˆç‹å¡å›¾ï¼

## ä¸ºä»€ä¹ˆä½¿ç”¨card.js

ä½ çš„ç½‘ç«™éœ€è¦å¤§é‡çš„æ¸¸æˆç‹å¡å›¾ï¼Œä½†æ˜¯ç½‘ä¸Šçš„å¡å›¾èµ„æºå‚å·®ä¸é½ï¼Ÿä¸å¦¨è¯•è¯•card.jsï¼Œåªéœ€è¦ä¸€æ¬¡çš„åŠ è½½ï¼Œå°±å¯ä»¥ä½¿ç”¨å¿«é€Ÿã€å¤§é‡ã€æ ‡å‡†ã€é«˜æ¸…çš„æ¸¸æˆç‹å¡å›¾ã€‚

* ğŸ‡ å¯¹äºæµ·é‡é«˜æ¸…å¡å›¾çš„åœºæ™¯ï¼Œç›¸æ¯”äºç›´æ¥ä¸‹è½½å®Œæ•´çš„å›¾ç‰‡ï¼Œcard.jsåªéœ€è¦ä¸‹è½½ä¸­é—´å¡å›¾è¿›è¡Œå‰ç«¯æ¸²æŸ“ï¼Œæ•´ä½“åŠ è½½éå¸¸è¿…é€Ÿï¼ŒèŠ‚çœäº†å¤§é‡å¸¦å®½ã€‚

* ğŸ‰ card.jsæ”¯æŒå¤æ‚çš„äº¤äº’åŠ¨æ•ˆï¼Œæ¯”å¦‚SRé¢é—ªç‰¹æ•ˆã€çƒ«é‡‘å­—ç­‰ã€‚åŒæ—¶å…è®¸å®æ—¶ä¿®æ”¹å¡ç‰‡ä¿¡æ¯ã€è‡ªç”±å®šåˆ¶å¡ç‰‡ã€‚

* ğŸ¥¦ card.jsä¼šè¿½è¸ªæ•°æ®çš„å˜åŠ¨ï¼Œè‡ªåŠ¨åœ°æ›´æ–°å¡å›¾ï¼Œè¿™åœ¨ä¸è¡¨å•äº¤äº’åœºæ™¯ååˆ†æœ‰ç”¨ã€‚åŒæ—¶ï¼Œå¯¹äºå¤§é‡çš„å›¾ç‰‡æ›´æ–°è¯·æ±‚ï¼Œcard.jsåªä¼šè¿›è¡Œä¸€æ¬¡ç»˜åˆ¶ï¼Œå› æ­¤ä½ ä¸ç”¨è¿‡å¤šçš„æ‹…å¿ƒæ€§èƒ½é—®é¢˜ã€‚

* ğŸ… card.jsååˆ†å®¹æ˜“ä½¿ç”¨ï¼Œä½ åªéœ€è¦çŸ­çŸ­çš„ä¸€è¡Œä»£ç ï¼Œå°±èƒ½å°†ä¸€å¼ canvasç”»å¸ƒå˜æˆä¸€å¼ æ¸¸æˆç‹é«˜æ¸…å¡å›¾ï¼å¦å¤–ï¼Œcard.jså¯ä»¥è‡ªç”±çš„æ›´æ”¹æ¨¡æ¿æ ·å¼ï¼Œåœ¨configæ–‡ä»¶ä¸­ä½ å¯ä»¥éšå¿ƒæ‰€æ¬²åœ°è¿›è¡Œåˆ›ä½œï¼

<br/>
<br/>

## ğŸˆ ä½œå“

[ğŸ”— æ¸¸æˆç‹åœ¨çº¿åˆ¶å¡å™¨  #yami](https://ymssx.gitee.io/ygo)

[ğŸ”— æ¸¸æˆç‹WIKI #yami](http://ocg.wiki/#59438930)

æ¬¢è¿å‘æˆ‘è‡ªèä½ çš„åŸºäºcard.jsçš„ä½œå“ï¼Œé‚®ç®±ï¼šymssx@qq.com

<a href="http://ocg.wiki/#59438930" target="blank"><img src="https://gitee.com/ymssx/cardjs/raw/master/demo/å¹½é¬¼å…”.jpg" height="200" /></a>
<a href="http://ocg.wiki/#62015408" target="blank"><img src="https://gitee.com/ymssx/cardjs/raw/master/demo/æµ®å¹½æ«».jpg" height="200" /></a>
<a href="http://ocg.wiki/#14558127" target="blank"><img src="https://gitee.com/ymssx/cardjs/raw/master/demo/ç°æµéº—.jpg" height="200" /></a>
<a href="http://ocg.wiki/#73642296" target="blank"><img src="https://gitee.com/ymssx/cardjs/raw/master/demo/å±‹æ•·ç«¥.jpg" height="200" /></a>
<a href="http://ocg.wiki/#60643553" target="blank"><img src="https://gitee.com/ymssx/cardjs/raw/master/demo/å„šç„¡æ°´æœ¨.jpg" height="200" /></a>
<a href="http://ocg.wiki/#52038441" target="blank"><img src="https://gitee.com/ymssx/cardjs/raw/master/demo/æœ”å¤œæ™‚é›¨.jpg" height="200" /></a>

<br/>
<br/>

## ğŸ“¦ å®‰è£…

```shell
$ git clone https://gitee.com/ymssx/cardjs.git
```

æˆ–è€…
```shell
$ npm i ygo-card
```

<br/>
<br/>

## ğŸš€ ä½¿ç”¨æ–¹å¼

å°†card.jsæ‰€åœ¨çš„æ–‡ä»¶å¤¹æ”¾åœ¨åˆé€‚çš„ä½ç½®ï¼Œåœ¨jsä¸­ä½¿ç”¨importçš„æ–¹å¼å¼•å…¥card.js

``` html
<canvas id="card"></canvas>
```

```javascript
import Card from './card.js';

const canvas = document.getElementById('card');
const data = { 
    name: 'é’çœ¼çš„ç™½é¾',
    _id: '89631139',
    type: 'monster',
    type2: 'tc',
    type3: '',
    type4: '',
    attack: 3000,
    defend: 2500,
    level: 8,
    desc: 'ä»¥é«˜æ”»æ“ŠåŠ›è‘—ç¨±çš„å‚³èªªä¹‹é¾ã€‚ä»»ä½•å°æ‰‹éƒ½èƒ½è¢«ç²‰ç¢ï¼Œå…¶ç ´å£åŠ›ä¸å¯ä¼°é‡ã€‚',
    race: 'é¾æ—',
    attribute: 'light' 
}

const card = new Card({ data, canvas, size: [400, 584] });

card.render();
```

**æ³¨æ„**ï¼Œå½“card.jsä¸åœ¨æ ¹ç›®å½•æ—¶ï¼Œä½ å¯èƒ½éœ€è¦æ‰‹åŠ¨æŒ‡å®šmoldPath ï¼ˆæœ«å°¾ä¸è¦åŠ "/"ï¼‰ã€‚

```javascript
const card = new Card({ data, canvas, moldPath: './source/mold' });
```

<br/>

> ### data -- å¡ç‰‡ä¿¡æ¯ï¼ŒåŒ…æ‹¬åå­—ã€å¯†ç ã€æ•ˆæœç­‰

```typescript
interface data = {
  name: string,                          // card name
  _id: string,                           // card id
  type: 'monster' | 'magic' | 'tragic',  // first type
  type2: type,                           // secend type
  type3: type,                           // third type
  type4: type,                           // fourth type
  desc: string                           // card describe
  ?attribute: 'light' | 'dark' | 'fire' | 'water' | 'wind' | 'ground' | 'god'
                                         // monster attribute
  ?race: string                          // monster race
  ?attack: number                        // monster attack
  ?defend: number                        // monster defend
  ?level: number                         // monster level

  ?link: boolean[]                       // link monster arrows
  ?lb_desc: string                       // pendulum describe
  ?lb_number: number                     // pendulum number
}

typeMap = { "tc": 'é€šå¸¸', "xg": 'æ•ˆæœ', "ys": 'å„€å¼', "rh": 'èåˆ', "tt": 'åŒèª¿', "cl": 'è¶…é‡', "lb": 'éˆæ“º', "lj": 'é€£æ¥', "ec": 'äºŒé‡', "tz": 'èª¿æ•´', "tm": 'åŒç›Ÿ', "tk": 'å¡é€š', "lh": 'éˆé­‚', "fz": 'åè½‰', "ts": 'ç‰¹æ®Šå¬å–š', "zb": 'è£å‚™', "sg": 'é€Ÿæ”»', "cd": 'å ´åœ°', "fj": 'åæ“Š', "yx": 'æ°¸çºŒ' }
```

<br/>
<br/>

## ğŸ æ¸¸æˆç‹å¡å›¾åº“

ä¸çŸ¥é“å»å“ªé‡Œæ‰¾å¡å›¾ï¼Ÿ

è¿™é‡Œæ”¶å½•äº†ç»å¤§å¤šæ•°æ¸¸æˆç‹å¡å›¾ï¼Œä¸å®šæœŸæ›´æ–°ã€‚

[ğŸ”— ä¼ é€é—¨](https://gitee.com/ymssx/pics)


<a href="http://ocg.wiki/#21844576" target="blank"><img src="https://gitee.com/ymssx/pics/raw/master/500/21844576.jpg" height="150" /></a>
<a href="http://ocg.wiki/#58932615" target="blank"><img src="https://gitee.com/ymssx/pics/raw/master/500/58932615.jpg" height="150" /></a>
<a href="http://ocg.wiki/#84327329" target="blank"><img src="https://gitee.com/ymssx/pics/raw/master/500/84327329.jpg" height="150" /></a>
<a href="http://ocg.wiki/#20721928" target="blank"><img src="https://gitee.com/ymssx/pics/raw/master/500/20721928.jpg" height="150" /></a>
<a href="http://ocg.wiki/#79979666" target="blank"><img src="https://gitee.com/ymssx/pics/raw/master/500/79979666.jpg" height="150" /></a>

<br/>
<br/>
 
## ğŸ‰ è¯¦ç»†é…ç½®
 
```typescript
const Card = function ({
  data: object,                           // å¡ç‰‡æ•°æ®
  canvas: HTMLElement,                    // canvaså¯¹è±¡
  size: number[],                         // ç»˜åˆ¶å°ºå¯¸ï¼Œ[å®½, é«˜]
  moldPath: string = './mold',            // æ¨¡æ¿èµ„æºè·¯å¾„
  lang:'cn' | 'jp' | 'en' = 'cn',         // è¯­è¨€ cnã€jpã€en
  config: object = defaultConfig,         // é…ç½®ä¿¡æ¯ - object
  fontLoaded: function = defaultEvent,    // äº‹ä»¶ - function
  imageLoaded: function = defaultEvent,
  fontsLoaded: function = defaultEvent,
  imagesLoaded: function = defaultEvent,
  loaded: function = defaultEvent,
  recover: boolean = false,               // æ˜¯å¦ç¼“å­˜é…ç½®ä¸æ•°æ® - boolean
  holo: boolean = true,                   // æ˜¯å¦æ˜¾ç¤ºé˜²ä¼ªæ ‡å¿— - boolean
  cardbagSwitch: boolean = false,         // æ˜¯å¦æ˜¾ç¤ºå¡åŒ…ä¿¡æ¯ - boolean
  translate: boolean = false,             // æ˜¯å¦è‡ªåŠ¨ç¹ç®€è½¬æ¢ - boolean
  verbose: boolean = false                // æ˜¯å¦å¼€å¯å•°å—¦æ¨¡å¼ - boolean
})
```

<br/>

> ### size

å½“ä¼ å…¥çš„å€¼ä¸ºæ•°ç»„æ—¶ï¼Œcanvasä¼šä¸¥æ ¼æŒ‰ç…§è¿™ä¸ªå°ºå¯¸è¿›è¡Œç»˜åˆ¶ã€‚

```javascript
const card = new Card({ data, canvas, size = [813, 1185] })
```

ä½ ä¹Ÿå¯ä»¥ä¸ä¼ å…¥sizeï¼Œå¦‚æœautoResizeä¸ºtrueï¼ˆé»˜è®¤å€¼ï¼‰ï¼Œé‚£ä¹ˆcard.jsä¼šè‡ªåŠ¨è®¡ç®—å°ºå¯¸ã€‚

å½“canvaså°ºå¯¸å˜åŒ–æ—¶ï¼Œcard.jsä¼šè‡ªåŠ¨é‡æ–°è¿›è¡Œç»˜åˆ¶ï¼Œä¿è¯å¡å›¾æ°¸è¿œé«˜æ¸…ï¼Œè¿™åœ¨å¼¹æ€§å¸ƒå±€ä¸­ååˆ†æœ‰ç”¨ã€‚

```html
<style>
#card {
  width: 80%;
}
</style>

<canvas id="card"></canvas>
```

```javascript
// autoResizeé»˜è®¤å¼€å¯
const card = new Card({ data, canvas, autoResize: true })
```

<br/>
<br/>

## ğŸŒ´ ç”Ÿå‘½å‘¨æœŸ

é€šè¿‡ä¼ å…¥äº‹ä»¶æ¥è‡ªå®šä¹‰å¡ç‰‡æ¸²æŸ“çš„ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ã€‚

### fontLoaded

å•ä¸ªå­—ä½“æ–‡ä»¶åŠ è½½å®Œæˆã€‚

```javascript
card.fontLoaded = function(e) {
  console.log(e);
}
 ```
 
### fontsLoaded

æ‰€æœ‰å­—ä½“æ–‡ä»¶åŠ è½½å®Œæˆã€‚

### imageLoaded

å•ä¸ªå›¾ç‰‡èµ„æºåŠ è½½å®Œæˆã€‚

### imagesLoaded

å•ä¸ªå›¾ç‰‡èµ„æºåŠ è½½å®Œæˆã€‚

### loaded

å¡ç‰‡æ¸²æŸ“å®Œæ¯•ã€‚

<br/>
<br/>
 
## ğŸ§° config

æ›´æ”¹configæ–‡ä»¶ï¼Œå¯ä»¥è‡ªç”±åœ°è°ƒæ•´å¡ç‰‡çš„æ ·å¼ï¼Œæ¯”å¦‚å­—ä½“å¤§å°ã€é¢œè‰²ç­‰ã€‚

[å…·ä½“é…ç½®è¯·å‚è€ƒ`config/defaultConfig.js`](https://gitee.com/ymssx/cardjs/tree/master/source/config)

```javascript
card.changeConfig(config);
```

<br/>

## ğŸ§® API

### Card.render

```javascript
await card.render();
```

åˆå§‹æ¸²æŸ“ï¼Œè¿”å›ä¸€ä¸ªpromiseå¯¹è±¡ï¼Œå½“ç»˜åˆ¶å®Œæ¯•æ—¶å˜ä¸ºfulfilledçŠ¶æ€ã€‚

<br/>

### Card.feed

ä½ å¯ä»¥è‡ªç”±çš„ä½¿ç”¨ä¸æ›´æ¢è‡ªå®šä¹‰çš„ä¸­é—´å¡å›¾ã€‚

æ¯”å¦‚å½“ä½ æƒ³æŠŠã€çœŸçº¢çœ¼é»‘é¾™ã€‘çš„å¡å›¾æ¢æˆã€é’çœ¼ç™½é¾™ã€‘ã€‚
```javascript
const pic = document.getElementById('blueEyes');
card.feed(pic);
```

<br/>

### Card.changeConfig

```javascript
card.changeConfig(config);
```


<br/>

### Card.feedData

è°ƒæ•´å¡ç‰‡ä¿¡æ¯ã€‚

```javascript
card.feedData(data);
```

æˆ–è€…ç›´æ¥
```javascript
card.data.name = 'Blue Eyes';
```

<br/>

### Card.save

ä¿å­˜å¡å›¾åˆ°æœ¬åœ°ï¼Œä½ å¯ä»¥æŒ‡å®šä¿å­˜æ—¶**æ–‡ä»¶åç§°**å’Œ**å›¾ç‰‡å°ºå¯¸**ã€‚
```javascript
card.save('é’çœ¼ç™½é¾™', [1626, 2370]);
```
ä¹Ÿå¯ä»¥ä¸æŒ‡å®šå‚æ•°ï¼Œcard.jsä¼šè‡ªåŠ¨ä½¿ç”¨å¡åä½œä¸ºæ–‡ä»¶åï¼Œå°ºå¯¸ä¼šä½¿ç”¨é»˜è®¤å€¼1626 Ã— 2370ã€‚

<br/>

## é™æ€æ–¹æ³•

ä»¥ä¸‹æ˜¯Cardå¯¹è±¡ç§æœ‰çš„æ–¹æ³•ï¼Œè¯·ä¸è¦åœ¨å®ä¾‹å¯¹è±¡ä¸Šä½¿ç”¨ã€‚

### Card.complex

å°†ç®€ä½“å­—æ–‡æœ¬è½¬æ¢ä¸ºç¹ä½“å­—æ–‡æœ¬ã€‚

```javascript
const complexText = Card.complex('é’çœ¼ç™½é¾™'); // é’çœ¼ç™½é¾
```

<br/>

### Card.transData

card.jséœ€è¦ä½ ä»¥ç‰¹å®šçš„JSONç»“æ„æ¥æè¿°ä¸€å¼ å¡ï¼Œè§‰å¾—éº»çƒ¦ï¼Ÿæ²¡å…³ç³»ï¼Œä½¿ç”¨transDataå¯ä»¥**ç›´æ¥å…¼å®¹YGOProè‡ªå¸¦æ•°æ®åº“çš„å¡ç‰‡æ•°æ®**ã€‚

```javascript
const ygoproData = {
  "name": "æ‹¥æœ‰æ“çºµé£åœ¨å¤©ç©ºé£èˆä¹‹ç¿¼çš„å…ƒç´ è‹±é›„ã€‚ä»¥æ¥è‡ªå¤©ç©ºçš„ä¸€å‡»ç¾½ç¿¼å‡»ç ´æ¥å®¡åˆ¤é‚ªæ¶ã€‚",
  "id": 21844576,
  "atk": 1000,
  "def": 1000,
  "race": 1,
  "type": 17,
  "level": 3,
  "attribute": 8
}
// æ¥è‡ªYGOProçš„æ•°æ®ï¼Œç›´æ¥ä¼ å…¥card.jsä¼šæŠ¥é”™
const newData = Card.transData(ygoproData);
console.log(newData);
```

è¾“å‡º

```javascript
{
  name: 'å…ƒç´ è‹±é›„ ç¾½ç¿¼ä¾ ',
  desc: 'æ‹¥æœ‰æ“çºµé£åœ¨å¤©ç©ºé£èˆä¹‹ç¿¼çš„å…ƒç´ è‹±é›„ã€‚ä»¥æ¥è‡ªå¤©ç©ºçš„ä¸€å‡»ç¾½ç¿¼å‡»ç ´æ¥å®¡åˆ¤é‚ªæ¶ã€‚',
  _id: '21844576',
  attack: 1000,
  defend: 1000,
  race: 'æˆ˜å£«æ—',
  type: 'monster',
  type2: 'tc',
  type3: '',
  type4: '',
  level: 3,
  attribute: 'wind'
}
// å¯ä»¥è¢«card.jsç†è§£çš„æ•°æ®å¯¹è±¡ç»“æ„
```

<br/>
<br/>

## ğŸ§¶ å®ç°æ–¹å¼

Card.js

* ğŸ“š cardData.js 

ç®¡ç†å¡ç‰‡æ•°æ®ï¼Œç›‘å¬æ•°æ®å˜åŠ¨ï¼Œå½“æ•°æ®æ›´æ–°ä¹‹åï¼ŒcardDataä¼šè‡ªåŠ¨åˆ†æéœ€è¦æ›´æ–°å“ªäº›æ–‡ä»¶ï¼Œç„¶åå‘ŠçŸ¥cardFile

* ğŸ“ cardFile.js

ç®¡ç†æ–‡ä»¶çš„æ›´æ–°ä¸ç¼“å­˜ï¼Œå½“æ”¶åˆ°cardDataçš„æ›´æ–°è¯·æ±‚åï¼Œä¼šè‡ªåŠ¨ä»ç¼“å­˜æˆ–è€…ç½‘ç»œè°ƒç”¨å›¾ç‰‡ï¼Œåœ¨æ–‡ä»¶æ›´æ–°ä¹‹åä¼šè‡ªåŠ¨å‘ŠçŸ¥cardDrawer

* ğŸ¨ cardDrawer.js

ç®¡ç†ç»˜å›¾åŠŸèƒ½ï¼Œåœ¨æ”¶åˆ°cardFileçš„ç»˜å›¾è¯·æ±‚åï¼Œä¼šæŒ‰ç…§cardDataçš„æ•°æ®ä»¥åŠcardFileæä¾›çš„æ–‡ä»¶è¿›è¡Œç»˜å›¾
 
